/*****************************/
/* Copyright Pepsia.com 2019 */
/*****************************/
!function(){if("object"!=typeof window.Pepsia&&(window.Pepsia={}),void 0===window.Pepsia.Helpers){"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),Object.defineProperty(window.Pepsia,"Helpers",{value:new function(){this.getPepsiaParam=function(e,t,o){var i=o=void 0!==o&&o,n=e.getAttribute("data-"+t);return n&&n.toString().match(new RegExp("^[A-Z0-9]{4}$","i"))&&(i=n),i},this.getPosParam=function(e,t,o){var i=o=void 0!==o&&o,n=!!e.getAttribute("data-"+t)&&e.getAttribute("data-"+t).toLowerCase();return n&&(n.match(/^((top|middle|bottom)\-(left|center|right)|false|0)$/)?("false"!=n&&"0"!=n||(n=!1),i=n):this.log("Helpers","data-"+t+" not valid : "+n+", overrided with "+o,"info")),i},this.getIntParam=function(e,t,o,i,n){o=void 0!==o?o:0,i=void 0!==i&&i,n=void 0!==n&&n;var a=isNaN(parseInt(e.getAttribute("data-"+t)))?o:parseInt(e.getAttribute("data-"+t));return a&&i&&a<i&&(this.log("Helpers","data-"+t+" not valid : "+a+", overrided with "+i,"info"),a=i),a&&n&&n<a&&(this.log("Helpers","data-"+t+" not valid : "+a+", overrided with "+n,"info"),a=n),a},this.getFloatParam=function(e,t,o,i,n){o=void 0!==o?o:0,i=void 0!==i&&i,n=void 0!==n&&n;var a=isNaN(parseFloat(e.getAttribute("data-"+t)))?o:parseFloat(e.getAttribute("data-"+t));return a&&i&&a<i&&(this.log("Helpers","data-"+t+" not valid : "+a+", overrided with "+i,"info"),a=i),a&&n&&n<a&&(this.log("Helpers","data-"+t+" not valid : "+a+", overrided with "+n,"info"),a=n),a},this.getBoolParam=function(e,t,o){return o=void 0!==o&&o,e.getAttribute("data-"+t)?!!+e.getAttribute("data-"+t):o},this.getLangParam=function(e,t,o){var i=o=void 0!==o&&o,n=!!e.getAttribute("data-"+t)&&e.getAttribute("data-"+t).toLowerCase();return n&&(n.match(/^([a-z]{2})$/)?i=n:this.log("Helpers","data-"+t+" not valid : "+n+", overrided with "+o,"info")),i},this.dispatchEvent=function(e,t,o){if(o={bubbles:!!(o=o||{bubbles:!1,cancelable:!1,detail:void 0}).bubbles,cancelable:!!o.cancelable,detail:o.detail?o.detail:null},"function"==typeof CustomEvent)var i=new CustomEvent(t,o);else(i=document.createEvent("CustomEvent")).initCustomEvent(t,o.bubbles,o.cancelable,o.detail);e.dispatchEvent(i)},this.addEventListener=function(e,t,o){e.addEventListener?e.addEventListener(t,o,!1):e.attachEvent&&e.attachEvent("on"+t,o)},this.removeEventListener=function(e,t,o){e.removeEventListener?e.removeEventListener(t,o,!1):e.detachEvent&&e.detachEvent("on"+t,o)},this.setCookie=function(e,t,o){var i="";if(o){var n=new Date;n.setTime(n.getTime()+60*o*1e3),i="; expires="+n.toGMTString()}document.cookie=e+"="+t+i+"; path=/"},this.getCookie=function(e){for(var t=e+"=",o=document.cookie.split(";"),i=0;i<o.length;i++){for(var n=o[i];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return null},this.getScreenPosition=function(){var e=void 0!==window.top.pageYOffset?window.top.pageYOffset:(window.top.document.documentElement||window.top.document.body.parentNode||window.top.document.body).scrollTop,t=void 0!==window.top.pageXOffset?window.top.pageXOffset:(window.top.document.documentElement||window.top.document.body.parentNode||window.top.document.body).scrollLeft;return{width:window.top.innerWidth,height:window.top.innerHeight,top:e,left:t,bottom:e+window.top.innerHeight,right:t+window.top.innerWidth}},this.getPosition=function(e){var t=0,o=0,i=0,n=0;if(e.offsetParent)for(t=e.offsetTop,o=e.offsetLeft,i=e.offsetWidth,n=e.offsetHeight;e=e.offsetParent;)if(t+=e.offsetTop,o+=e.offsetLeft,"fixed"==e.style.position){t+=void 0!==window.top.pageYOffset?window.top.pageYOffset:(window.top.document.documentElement||window.top.document.body.parentNode||window.top.document.body).scrollTop,o+=void 0!==window.top.pageXOffset?window.top.pageXOffset:(window.top.document.documentElement||window.top.document.body.parentNode||window.top.document.body).scrollLeft;break}return{width:i,height:n,top:t,left:o,right:o+i,bottom:t+n}},this.screenVisibilityFromPos=function(e){var t=this.getScreenPosition(),o=e.height,i=e.width;if(e.top>t.bottom||e.bottom<t.top||e.left>t.right||e.right<t.left)return 0;e.top<t.top&&(o-=t.top-e.top),e.bottom>t.bottom&&(o-=e.bottom-t.bottom),e.left<t.left&&(i-=t.left-e.left),e.right>t.right&&(i-=e.right-t.right);var n=e.height*e.width,a=o*i;return 0<a?a/n:0},this.screenVisibilityMatrix=function(e,t,o,i,n,a,r){i=void 0!==i?i:0,n=void 0!==n?n:0,a=void 0!==a?a:0,r=void 0!==r?r:0;var p=[];function l(e,t,o){for(var i=[],n=0;n<t;n++){i[n]=[];for(var a=0;a<e;a++)i[n][a]=o}return i}var s=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(s&&(s===e||s.contains(e)))return{percent:1,matrix:p=l(t,o,1),pepsia_covered:!1};var d=Pepsia.Helpers.getPosition(e);if(d.width-=r+n,d.height-=i+a,d.top+=i,d.left+=r,d.right-=n,d.bottom-=a,0==this.screenVisibilityFromPos(d))return{percent:0,matrix:p=l(t,o,0),pepsia_covered:!1};var c=d.width/t,m=d.height/o;d.left+=c/2,d.top+=m/2;for(var u=null,g=0,f=!1,b=d.left-(void 0!==window.top.pageXOffset?window.top.pageXOffset:(window.top.document.documentElement||window.top.document.body.parentNode||window.top.document.body).scrollLeft),y=d.top-(void 0!==window.top.pageYOffset?window.top.pageYOffset:(window.top.document.documentElement||window.top.document.body.parentNode||window.top.document.body).scrollTop),h=0;h<o;h++){p[h]=[],b=d.left-(void 0!==window.top.pageXOffset?window.top.pageXOffset:(window.top.document.documentElement||window.top.document.body.parentNode||window.top.document.body).scrollLeft);for(var P=0;P<t;P++){if((u=document.elementFromPoint(b,y))===e||e.contains(u))g++,p[h][P]=1;else if(u&&!f){this.getParentWithClass(u,"pepsia_player")?(p[h][P]=2,f=f||!0):p[h][P]=0}else p[h][P]=0;b+=c}y+=m}return percent=g/(t*o),{percent:percent,matrix:p,pepsia_covered:f}},this.getParentWithClass=function(e,t){return e?e.className&&0<=e.className.split(" ").indexOf(t)?e:e.parentNode&&this.getParentWithClass(e.parentNode,t):null},this.log=function(e,t,o,i){o=void 0!==o?o:"log",!(i=void 0!==i&&i)&&"error"!=o||console[o]("%c Pepsia.com "+e,"background: #ccc; color: #2176ff",t)}},enumerable:!0,writable:!1})}if(void 0===window.Pepsia.IABConsentString){Object.defineProperty(window.Pepsia,"IABConsentString",{value:new function(){var t="1",o=!1;function i(e){Pepsia.Helpers.log("Consent","Store data","info",o),t=e,Pepsia.Helpers.setCookie("PepsiaConsent",t,1440)}function n(){if(Pepsia.Helpers.log("Consent","Request Local CMP Data","info",o),"function"==typeof window.top.__cmp){window.top.__cmp("getConsentData",null,function(e){e.consentData&&i(e.consentData)})}}this.get=function(){return t},Pepsia.Helpers.getCookie("PepsiaConsent")?(t=Pepsia.Helpers.getCookie("PepsiaConsent"),n()):function(){Pepsia.Helpers.log("Consent","Request External CMP Data","info",o);var e=new XMLHttpRequest;e.open("GET",atob("aHR0cHM6Ly9jLnNoYXJldGhpcy5tZ3IuY29uc2Vuc3Uub3JnL2dldF9jb25zZW50")),e.withCredentials=!0,e.onload=function(){200===e.status&&(consent=JSON.parse(e.response),consent.cookie&&""!=consent.cookie?i(consent.cookie):n())},e.onerror=function(){Pepsia.Helpers.log("Consent","Request External CMP Data Error","info",o),n()},e.send()}()},enumerable:!0,writable:!1})}if("function"!=typeof window.Pepsia.Player){d={token:z=V=I=!(W={}),vid:!(_={}),cid:!(S={}),autoplay:!(D=L=!(j={})),automute:!(s={}),controls:!(l=!1),mute:!0,volume:1,logo:!0,lang:!(N={}),corner:"bottom-left",interstitial:0,popup:!1,inscreen:!1,skip:!1,maxplay:15,clicsaver:!1,debug:!1,gdpr:2},X=R=F=!(M={}),B=!!Pepsia.Helpers.getCookie("PepsiaClose"),Y=window.top.scrollX,Q=window.top.scrollY,Pepsia.Helpers.addEventListener(window,"message",function(e){if(void 0!==e.data.provider&&"Pepsia"==e.data.provider&&void 0!==e.data.id&&void 0!==e.data.action&&void 0!==j[e.data.id]){var t=j[e.data.id];switch(e.data.action){case"apiready":t.api=!0,t.interstitial&&(v(t,{action:"interstitial_start",value:t.interstitial}),h(t)),t.autoplay,X&&clearTimeout(X),X=setTimeout(function(){T(!0),Pepsia.Helpers.log("Player #"+t.id,"SCROLLHANDLER START","info",t.debug)},500),Pepsia.Helpers.dispatchEvent(t.player,"apiready"),Pepsia.Helpers.log("Player #"+t.id,"APIREADY","info",t.debug);break;case"ready":t.state="start",Pepsia.Helpers.dispatchEvent(t.player,"ready"),Pepsia.Helpers.log("Player #"+t.id,"READY","info",t.debug);break;case"userpause":break;case"started":t.started=!0,t.inplay=!1,t==I&&"corner"!=I.mode&&T(!0);break;case"canpause":t.canpause=e.data.value,t.forced&&t.canpause&&(Pepsia.Helpers.log("Player #"+t.id,"TEST PAUSED !","info",t.debug),E(t),t.forced=!1),t==L&&t.canpause&&T(!0);break;case"userplay":t.clicsaver&&"interstitial"==t.mode&&(v(L,{action:"interstitial_start",value:!1}),P(t),t.clicsaver=!1,H(t,"SaverPlay !")),t!=L&&(D&&D!=t&&Pepsia.Helpers.log("Player #"+D.id,"Désactivation forcage User !","info",D.debug),L.canpause?E(L):(Pepsia.Helpers.log("Player #"+L.id,"Activation forcage paused !","info",L.debug),L.forced=!0),C(D=L=t),Pepsia.Helpers.log("Player #"+t.id,"Activation forcage User !","info",t.debug)),Pepsia.Helpers.log("Player #"+t.id,"User Play","info",t.debug);break;case"play":Pepsia.Helpers.log("Player #"+t.id,"Play","info",t.debug);break;case"resize":500<=t.player.offsetWidth?t.container.style.cssText="position:relative !important;padding:calc(56.25% + 60px) 0 0 0 !important;":t.container.style.cssText="position:relative !important;padding:calc(56.25% + 40px) 0 0 0 !important;",Pepsia.Helpers.dispatchEvent(t.player,"sizechange",{detail:{width:t.element.offsetWidth,height:t.element.offsetHeight}});break;case"getVideos":var o=e.data.num?e.data.num:3,n=t.cid?t.cid:"all",a=[];for(i in M[n]){if(0==o)break;a.push(M[n][i]),delete M[n][i],o--}Object.keys(M[n]).length<o&&y(),0<a.length&&v(t,{action:"setVideos",videos:a});break;case"interstitial_start":Pepsia.Helpers.dispatchEvent(t.player,"interstitial_start");break;case"interstitial_end":z=!1,Pepsia.Helpers.setCookie("PepsiaInterstitial",1,30),P(t),T(!0),Pepsia.Helpers.dispatchEvent(t.player,"interstitial_end");break;case"start":Pepsia.Helpers.log("Player #"+t.id,"START","info",t.debug);break;case"end":Pepsia.Helpers.log("Player #"+t.id,"END","info",t.debug),t.cpt++,0<t.maxplay&&t.cpt==t.maxplay&&(H(t,"MaxPlay"),b(t));break;case"logo":var r=e.data.value;r!=t.logo&&(t.logo=r,Pepsia.Helpers.dispatchEvent(t.player,"logochange",{detail:r}));break;case"mute":var p=e.data.value;S[t.id]||t.mute==p||(t.mute=p,Pepsia.Helpers.dispatchEvent(t.player,"mutechange",{detail:p}));break;case"controls":var l=e.data.value;_[t.id]||l==t.controls||(t.controls=l,Pepsia.Helpers.dispatchEvent(t.player,"controlschange",{detail:l}));break;case"autoplay":var s=e.data.value;t.autoplay!=s&&(t.autoplay=s,Pepsia.Helpers.dispatchEvent(t.player,"autoplaychange",{detail:s}));break;case"fullscreen":var d=e.data.value;d!=t.fullscreen&&(t.fullscreen=d,Pepsia.Helpers.dispatchEvent(t.player,"fullscreenchange",{detail:d}));break;case"volume":var c=e.data.value;c!=t.volume&&(t.volume=c,Pepsia.Helpers.dispatchEvent(t.player,"volumechange",{detail:c}));break;case"duration":var m=isNaN(parseFloat(e.data.value))?0:parseFloat(e.data.value);m!=t.duration&&(t.duration=m,Pepsia.Helpers.dispatchEvent(t.player,"durationchange",{detail:m}));break;case"time":var u=isNaN(parseFloat(e.data.value))?0:parseFloat(e.data.value);t.time!=u&&(t.time=u,Pepsia.Helpers.dispatchEvent(t.player,"timechange",{detail:m})),!t.skip||"popup"!=t.mode&&"corner"!=t.mode||(f=t).started&&f.canpause&&!f.fullscreen&&!W[f.id]&&.5<f.time/f.duration&&f.time/f.duration<.9&&(w(f,f.duration-1),Pepsia.Helpers.log("Player #"+f.id,"Skip to "+(f.duration-1)+"s","info",f.debug)),"normal"==t.mode&&0==t.screenVisibility&&!A(t)&&t.duration-t.time<=2&&(g=t)&&!W[g.id]&&g.started&&(x(W[g.id]=g),Pepsia.Helpers.log("Player #"+g.id,"Waited","info",g.debug));break;case"error":message=e.data.message,Pepsia.Helpers.dispatchEvent(t.player,"error",{detail:message}),Pepsia.Helpers.log("Player #"+t.id,message,"error",t.debug),b(t)}e.stopPropagation()}var g,f}),Pepsia.Helpers.addEventListener(window,"scroll",T),Pepsia.Helpers.addEventListener(document,"visibilitychange",function(){Pepsia.Helpers.log("Pepsia","Visibility Change","info",!0),T(!0)}),"function"!=typeof window.PepsiaPlayerAsync&&(window.PepsiaPlayerAsync=function(){!function(e){if(null===(e=void 0!==e?e:null)){if(arr=document.getElementsByClassName("pepsia_player"),0<arr.length){for(var t=arr.length-1;0<=t;t--)a(arr[t]);y()}}else{if(!e)return;a(e)&&y()}}()}),Object.defineProperty(window.Pepsia,"Player",{value:function(e){var t=a(e);return y(),o(t),e},enumerable:!0,writable:!1}),window.PepsiaPlayerAsync()}function n(e,t){var i={};return i.element=e,i.api=!1,i.started=!1,i.canpause=!1,i.forced=!1,i.fullscreen=!1,i.closed=!!Pepsia.Helpers.getCookie("PepsiaClose"),i.id=t.id,i.token=t.token,i.vid=t.vid,i.cid=t.cid,i.autoplay=t.autoplay,i.automute=t.automute,i.controls=t.controls,i.mute=t.mute,i.volume=t.volume,i.lang=t.lang,i.logo=t.logo,i.corner=t.corner,i.interstitial=t.interstitial,i.popup=t.popup,i.inscreen=t.inscreen,i.maxplay=t.maxplay,i.skip=t.skip,i.clicsaver=t.clicsaver,i.debug=t.debug,i.gdpr=t.gdpr,i.state="",i.duration=0,i.time=0,i.mode="normal",i.cpt=0,i.isview=!1,i.inplay=!1,i.container=document.createElement("div"),i.container.id="pepsia_player_container_"+i.id,500<=e.offsetWidth?i.container.style.cssText="position:relative !important;padding:calc(56.25% + 60px) 0 0 0 !important;":i.container.style.cssText="position:relative !important;padding:calc(56.25% + 40px) 0 0 0 !important;",i.box=document.createElement("div"),i.box.id="pepsia_player_box_"+i.id,i.box.style.background="#fff",i.box.style.boxShadow="0 0 10px #ccc",i.box.style.margin="0 !important",i.box.style.padding="0 !important",i.box.style.position="absolute",i.box.style.zIndex="auto",i.box.style.width="100%",i.box.style.height="100%",i.box.style.bottom=0,i.box.style.left=0,i.box.style.top=0,i.box.style.right=0,i.close=document.createElement("a"),i.close.id="pepsia_player_close_"+i.id,i.close.title="Close",i.close.href="#",i.close.innerHTML="x",i.close.setAttribute("data-role","none"),i.close.onclick=function(e){e.preventDefault(),Pepsia.Helpers.setCookie("PepsiaClose",1,30),H(i,"close"),T(B=!0)},i.close.style.display="none",i.player=document.createElement("iframe"),i.player.id="pepsia_player_screen_"+i.id,i.player.src="about:blank",i.player.setAttribute("allowfullscreen",""),i.player.setAttribute("mozallowfullscreen",""),i.player.setAttribute("webkitallowfullscreen",""),i.player.setAttribute("frameborder","0"),i.player.setAttribute("allow","autoplay"),i.player.style.cssText="margin: 0;padding: 0;width:100% !important;height:100% !important;overflow:hidden !important;position: absolute;top: 0;left: 0;bottom: 0;right: 0;",i.player.onload=function(){var t=location.protocol+"//player.pepsia.com/V2/indexv2.php";t+="?token="+i.token,i.vid&&(t+="&vid="+i.vid),i.cid&&(t+="&cid="+i.cid),i.mute||(t+="&mute=0"),i.controls&&(t+="&controls=1"),i.autoplay&&(t+="&autoplay=1"),i.lang&&(t+="&lang="+i.lang),t+="&logo="+i.logo,t+="&volume="+i.volume,t+="&api=1",t+="&id="+i.id,i.debug&&(t+="&debug=1"),t+="&origin="+window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),t+="&gdpr="+i.gdpr,t+="&d="+(new Date).getTime().toString(16),i.player.onload=null;var o=new XMLHttpRequest;o.open("GET",t),o.withCredentials=!0,o.onload=function(){if(200===o.status){var e=this.contentWindow?this.contentWindow:this.contentDocument.document?this.contentDocument.document:this.contentDocument;""==e.document.referrer&&(e.document.open(),e.document.write('<script>history.replaceState({}, "'+document.title+'", "'+location.pathname+'");<\/script>'),e.document.close()),e.document.open(),e.document.write(o.response),e.document.close()}else this.src=t}.bind(i.player),o.onerror=function(){this.src=t}.bind(i.player),o.send()}.bind(i),i.box.appendChild(i.close),i.box.appendChild(i.player),i.container.appendChild(i.box),i.inscreen&&function(e){Pepsia.Helpers.log("Player #"+e.id,"Looking for best inscreen position","info",e.debug);var t,o=Pepsia.Helpers.getScreenPosition(),i=Pepsia.Helpers.getPosition(e.element);if(i.height=9*i.width/16+(480<i.width?60:40),i.bottom=i.top+i.height,.5<=Pepsia.Helpers.screenVisibilityFromPos(i))return Pepsia.Helpers.log("Player #"+e.id,"Player is already inscreen !","info",e.debug);for(var n=e.element,a=0;a<e.inscreen;a++)n.parentNode&&(n=n.parentNode,t=n);var r=Pepsia.Helpers.getPosition(t);if(r.height+=i.height,r.bottom+=i.height,1<e.inscreen){n=e.element.parentNode,(p=Pepsia.Helpers.getPosition(n)).height+=i.height,p.bottom+=i.height}else{n=e.element;var p=i}var l=i.top-p.top,s=i.left-p.left;if(r.top<o.bottom&&r.bottom>o.top&&r.left<o.right&&r.right>o.left){for(var d=t.childElementCount-1;0<d;d--){var c=window.getComputedStyle(t.children[d],null);if("fixed"!==c.getPropertyValue("position")&&"absolute"!==c.getPropertyValue("position")&&"left"===c.getPropertyValue("float")&&"right"===c.getPropertyValue("float")){var m=Pepsia.Helpers.getPosition(t.children[d]);if(m.top+=l,m.left+=s,m.height=i.height,m.width=i.width,m.bottom=m.top+i.height,m.right=m.left+i.width,.5<=Pepsia.Helpers.screenVisibilityFromPos(m)&&m.top<i.top)return Pepsia.Helpers.log("Player #"+e.id,"Move Player on "+d+" child position !","info",e.debug),t.insertBefore(n,t.children[d])}}Pepsia.Helpers.log("Player #"+e.id,"No Best position found !","info",e.debug)}else Pepsia.Helpers.log("Player #"+e.id,"TopParentPlayer is NOT inscreen !","info",e.debug);Pepsia.Helpers.log("Player #"+e.id,"Set Player on 1 child position !","info",e.debug),t.insertBefore(n,t.firstChild)}(i),i.element.appendChild(i.container),i}function b(e){if(delete j[e.id],Pepsia.Helpers.log("Player #"+e.id,"Killed !","info",e.debug),z==e)for(var t in z=!1,j){var o=Pepsia.Helpers.getIntParam(j[t].element,"interstitial",d.interstitial,15,60);if(o){j[t].interstitial=o,z=j[t],Pepsia.Helpers.log("Player #"+j[t].id,"Activation de l'interstitial "+o+"s (Kill player #"+e.id+" avec interstitial encore actif)","info",j[t].debug);break}}if(V==e)for(var t in V=!1,j){var i=Pepsia.Helpers.getPosParam(j[t].element,"popup",d.popup);if(i){j[t].popup=i,V=j[t],Pepsia.Helpers.log("Player #"+j[t].id,"Activation du popup "+i+" (Kill player #"+e.id+" avec popup encore actif)","info",j[t].debug);break}}if(I==e)for(var t in I=!1,j){var n=Pepsia.Helpers.getPosParam(j[t].element,"corner",d.corner);if(n){j[t].corner=n,I=j[t],Pepsia.Helpers.log("Player #"+j[t].id,"Activation du corner "+n+" (Kill player #"+e.id+" avec corner encore actif)","info",j[t].debug);break}}L==e&&(L=!1),D==e&&(D=!1),delete s[e.id],delete S[e.id],delete _[e.id],delete W[e.id],e.element.remove(),T(!0)}function o(o){Object.defineProperty(o.element,"api",{get:function(){return o.api},enumerable:!0}),Object.defineProperty(o.element,"token",{get:function(){return o.token},enumerable:!0}),Object.defineProperty(o.element,"fullscreen",{get:function(){return o.fullscreen},set:function(e){v(o,{action:"setFullscreen",bool:e})},enumerable:!0}),Object.defineProperty(o.element,"autoplay",{get:function(){return o.autoplay},set:function(e){v(o,{action:"setAutoplay",bool:e})},enumerable:!0}),Object.defineProperty(o.element,"mute",{get:function(){return o.mute},set:function(e){p(o,e)},enumerable:!0}),Object.defineProperty(o.element,"controls",{get:function(){return o.controls},set:function(e){r(o,e)},enumerable:!0}),Object.defineProperty(o.element,"volume",{get:function(){return o.volume},set:function(e){v(o,{action:"setVolume",level:e})},enumerable:!0}),Object.defineProperty(o.element,"play",{value:function(){t(o)},enumerable:!0,writable:!1}),Object.defineProperty(o.element,"pause",{value:function(){x(o)},enumerable:!0,writable:!1}),Object.defineProperty(o.element,"next",{value:function(){m(o)},enumerable:!0,writable:!1}),Object.defineProperty(o.element,"time",{get:function(){return o.time},set:function(){w(o,time)},enumerable:!0}),Object.defineProperty(o.element,"load",{value:function(e){_load(o,e)},enumerable:!0,writable:!1}),Object.defineProperty(o.element,"screenVisibility",{get:function(){return o.screenVisibility},enumerable:!0}),Object.defineProperty(o.element,"logo",{get:function(){return o.logo},set:function(e){v(o,{action:"setLogo",bool:e})},enumerable:!0}),Object.defineProperty(o.element,"popup",{get:function(){return o.popup},enumerable:!0}),Object.defineProperty(o.element,"corner",{get:function(){return o.corner},enumerable:!0}),Object.defineProperty(o.element,"interstitial",{get:function(){return o.interstitial},enumerable:!0}),Object.defineProperty(o.element,"mode",{get:function(){return o.mode},enumerable:!0}),Object.defineProperty(o.element,"addEventListener",{value:function(e,t){Pepsia.Helpers.addEventListener(o.player,e,t)},enumerable:!0,writable:!1}),Object.defineProperty(o.element,"removeEventListener",{value:function(e,t){Pepsia.Helpers.removeEventListener(o.player,e,t)},enumerable:!0,writable:!1})}function y(){if(!R){R=!0;var e,t={all:0};for(var o in j){var i=j[o];i.cid?(void 0===t[i.cid]&&(t[i.cid]=0),t[i.cid]++):t.all++,e=i.token}for(k in t){M[k],M[k]={};var n=6*parseInt(t[k])-Object.keys(M[k]).length+3;Pepsia.Helpers.log("Controler","Looking for "+n+" videos","info",l);var a=new XMLHttpRequest,r=location.protocol+"//player.pepsia.com/V2/algov2.php";r+="?token="+e,r+="&num="+n,"all"!=k&&(r+="&cid="+k),r+="&origin="+window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),r+="&d="+(new Date).getTime().toString(16),a.open("GET",r),a.withCredentials=!0,a.onload=function(){if(R=!1,200===a.status)if(data=JSON.parse(a.responseText),"ok"==data.status){for(var e in Pepsia.Helpers.log("Controler",data.data.length+(1<data.data.length?" videos found !":" video found !"),"info",l),data.data)M[k][data.data[e].id]=data.data[e];Pepsia.Helpers.log("Controler",M,"info",l)}else Pepsia.Helpers.log("Controler",data.message,"error",l)},a.send()}}}function a(e){if(!e)return!1;var t={};if(t.id=Object.keys(j).length,t.token=Pepsia.Helpers.getPepsiaParam(e,"token",d.token),!t.token)return Pepsia.Helpers.log("Player #"+t.id,"No Token Provided !","error"),!1;t.vid=Pepsia.Helpers.getPepsiaParam(e,"vid",d.vid),t.cid=Pepsia.Helpers.getPepsiaParam(e,"cid",d.cid),t.autoplay=Pepsia.Helpers.getBoolParam(e,"autoplay",d.autoplay),t.automute=Pepsia.Helpers.getBoolParam(e,"automute",d.automute),t.controls=Pepsia.Helpers.getBoolParam(e,"controls",d.controls),t.mute=Pepsia.Helpers.getBoolParam(e,"mute",d.mute),t.volume=Pepsia.Helpers.getFloatParam(e,"logo",d.volume,0,1),t.logo=Pepsia.Helpers.getBoolParam(e,"logo",d.logo),t.lang=Pepsia.Helpers.getLangParam(e,"lang",d.lang),t.corner=Pepsia.Helpers.getPosParam(e,"corner",d.corner),t.popup=Pepsia.Helpers.getPosParam(e,"popup",d.popup),t.interstitial=Pepsia.Helpers.getIntParam(e,"interstitial",d.interstitial,15,60),t.inscreen=Pepsia.Helpers.getIntParam(e,"inscreen",d.inscreen,1,2),t.maxplay=Pepsia.Helpers.getIntParam(e,"maxplay",d.maxplay,1,15),t.skip=Pepsia.Helpers.getBoolParam(e,"skip",d.skip),t.clicsaver=Pepsia.Helpers.getBoolParam(e,"clicsaver",d.clicsaver),t.debug=Pepsia.Helpers.getBoolParam(e,"debug",d.debug),t.gdpr=Pepsia.Helpers.getIntParam(e,"gdpr",d.gdpr,0,2),2==t.gdpr&&(t.gdpr=Pepsia.IABConsentString.get());0<=["00eM"].indexOf(t.token)&&(t.corner=!1,t.popup=!1,Pepsia.Helpers.log("Player #"+t.id,"Désactivation T du corner !","warn",!0)),t.corner&&(I?(Pepsia.Helpers.log("Player #"+t.id,"1 seul corner autorisé ! Désactivation du corner !","warn",!0),t.corner=!1):B?(Pepsia.Helpers.log("Player #"+t.id,"Le visiteur a fermé 1 player Pepsia lors des 30 dernières minutes ! Désactivation du corner !","info",!0),t.corner=!1):I=!0),t.popup&&(V?(Pepsia.Helpers.log("Player #"+t.id,"1 seul popup autorisé ! Désactivation du popup !","warn",!0),t.popup=!1):B?(Pepsia.Helpers.log("Player #"+t.id,"Le visiteur a fermé 1 player Pepsia lors des 30 dernières minutes ! Désactivation du popup !","info",!0),t.popup=!1):V=!0),t.interstitial&&(z?(Pepsia.Helpers.log("Player #"+t.id,"1 seul interstitial autorisé ! Désactivation de l'interstitial !","warn",!0),t.interstitial=!1):Pepsia.Helpers.getCookie("PepsiaInterstitial")?(Pepsia.Helpers.log("Player #"+t.id,"Le visiteur a vu 1 interstitial lors des 30 dernières minutes ! Désactivation de l'interstitial !","info",!0),t.interstitial=!1):z=!0),t.autoplay||(t.vid||(Pepsia.Helpers.log("Player #"+t.id,"Pas de vidéo activé ! Activation forcée de l'autoplay !","info",!0),t.autoplay=!0),t.interstitial&&(Pepsia.Helpers.log("Player #"+t.id,"Interstitial activé ! Activation forcée de l'autoplay !","info",!0),t.autoplay=!0),t.popup&&(Pepsia.Helpers.log("Player #"+t.id,"Popup activé ! Activation forcée de l'autoplay !","info",!0),t.autoplay=!0),t.corner&&(Pepsia.Helpers.log("Player #"+t.id,"Corner activé ! Activation forcée de l'autoplay !","info",!0),t.autoplay=!0));var o=n(e,t);return o&&(j[o.id]=o,!0===z&&(z=o),!0===I&&(I=o),!0===V&&(V=o)),o}function h(e){e.mode="interstitial",e.box.style.position="fixed",e.box.style.zIndex=92147483647,e.box.style.width="100%",e.box.style.height="100%",e.box.style.bottom=0,e.box.style.left=0,e.box.style.top=0,e.box.style.right=0,e.close.style.display="none",e.box.style.transform="",v(e,{action:"mode",value:"interstitial"}),f(e)}function P(e){var t;e.mode="normal",e.box.style.position="absolute",e.box.style.zIndex="auto",e.box.style.width="100%",e.box.style.height="100%",e.box.style.bottom=0,e.box.style.left=0,e.box.style.top=0,e.box.style.right=0,e.close.style.display="none",e.box.style.transform="",v(e,{action:"mode",value:"normal"}),(t=e)&&_[t.id]&&(delete _[t.id],r(t,!0),Pepsia.Helpers.log("Player #"+t.id,"unControled","info",t.debug))}function c(){return"connection"in navigator&&(!!navigator.connection.saveData&&navigator.connection.saveData)}function v(e,t){if(!e.api&&"setVideos"!=t.action)return Pepsia.Helpers.log("Player #"+e.id,"ERROR "+t.action+" : API not ready yet !","error",e.debug),void(F||(F=!0,setTimeout(function(){F=!1,v(e,t)},500)));var o=e.player.contentWindow?e.player.contentWindow:e.player.contentDocument.document?e.player.contentDocument.document:e.player.contentDocument;t.id=e.id,t.provider="Pepsia",t=JSON.parse(JSON.stringify(t)),o.postMessage(t,"*")}function t(e){e.inplay=!0,v(e,{action:"play"})}function x(e){v(e,{action:"pause"})}function w(e,t){v(e,{action:"seek",time:t})}function H(e,t){v(e,{action:"track",value:t})}function m(e){e.inplay=!0,v(e,{action:"next"})}function r(e,t){v(e,{action:"setControls",bool:t})}function p(e,t){v(e,{action:"setMute",bool:t})}function u(e){!e||S[e.id]||e.mute||(p(e,!0),S[e.id]=e,Pepsia.Helpers.log("Player #"+e.id,"Muted","info",e.debug))}function g(e){e&&S[e.id]&&(delete S[e.id],p(e,!1),Pepsia.Helpers.log("Player #"+e.id,"unMuted","info",e.debug))}function E(e){e&&!s[e.id]&&e.started&&e.canpause?(x(s[e.id]=e),Pepsia.Helpers.log("Player #"+e.id,"Paused","info",e.debug)):(Pepsia.Helpers.log("Player #"+e.id,"Paused Failed","info",e.debug),Pepsia.Helpers.log("Player #"+e.id,s,"info",e.debug),Pepsia.Helpers.log("Player #"+e.id,e,"info",e.debug))}function C(e){e&&s[e.id]&&(delete s[e.id],t(e),Pepsia.Helpers.log("Player #"+e.id,"unPaused","info",e.debug))}function f(e){e&&e.controls&&!_[e.id]&&(r(_[e.id]=e,!1),Pepsia.Helpers.log("Player #"+e.id,"Controled","info",e.debug))}function O(e){e&&W[e.id]&&(delete W[e.id],t(e),Pepsia.Helpers.log("Player #"+e.id,"unWaited","info",e.debug))}function A(e){return!(!e||!W[e.id])}function T(e){if(!("object"==typeof(e=void 0!==e&&e)&&Math.abs(window.top.scrollX-Y)<20&&Math.abs(window.top.scrollY-Q)<20)&&(Y=window.top.scrollX,Q=window.top.scrollY,0!=Object.keys(j).length)){if(B&&(V&&"popup"==V.mode&&!V.closing&&(Pepsia.Helpers.log("Player #"+V.id,"Désactivation mode Popup ! (closed)","info",V.debug),V.closing=1,window.jQuery?jQuery("#"+V.box.id).animate({height:"+=5",width:"+=5"},300).animate({height:"-=50",width:"-=50"},1200).animate({height:"0"},500,function(){P(V),u(V),V=!1}):(P(V),u(V),V=!1)),I&&!I.closing&&(Pepsia.Helpers.log("Player #"+I.id,"Désactivation mode Corner ! (closed)","info",I.debug),I.closing=1,window.jQuery?jQuery("#"+I.box.id).animate({height:"+=5",width:"+=5"},300).animate({height:"-=50",width:"-=50"},1200).animate({height:"0"},500,function(){P(I),u(I),I=!1}):(P(I),u(I),I=!1))),z&&z.api&&"interstitial"==z.mode)return Pepsia.Helpers.log("Player #"+z.id,"Activation mode Interstitial !","info",z.debug),(L=L||z)!=z&&(E(L),u(L),L=z),void(!L.started&&L.autoplay&&m(L));if(!(L&&L.started&&c()&&L.clicsaver&&"interstitial"==L.mode)){for(var t in N={},j){var o=j[t],i=(a=o.container,r=480<a.offsetWidth?40:20,Pepsia.Helpers.screenVisibilityMatrix(a,3,4,r,0,20,0).percent);.25<i&&(o.isview=!0,V&&o==V&&("popup"==V.mode&&(Pepsia.Helpers.log("Player #"+V.id,"Désactivation mode Popup ! (position ok)","info",V.debug),P(V),window.jQuery&&V.closing&&(jQuery("#"+V.box.id).stop(!0,!1),jQuery("#"+V.box.id).finish(),u(V))),V=!1),I&&o==I&&"corner"==I.mode&&(Pepsia.Helpers.log("Player #"+I.id,"Désactivation mode Corner ! (position ok)","info",I.debug),P(I),window.jQuery&&I.closing&&(jQuery("#"+I.box.id).stop(!0,!1),jQuery("#"+I.box.id).finish(),u(I),I=!1)),o.api&&!document.hidden&&(N[o.id]=o)),o.screenVisibility=i,o.started&&"normal"==o.mode&&(0==i?(u(o),C(o)):(n=o)&&S[n.id]&&(E(o),g(o))),o.screenVisibility=i}var n,a,r;if(!L||L.canpause||!N[L.id]){if(L&&D&&L==D){if(N[L.id])return;D=!1,Pepsia.Helpers.log("Player #"+L.id,"Désactivation forcage User !","info",L.debug)}if(0<Object.keys(N).length){var p=0,l=null;for(var t in N){var s=N[t],d=s.screenVisibility;p<=d&&(s.started||(d+=1),A(s)&&(d+=1),p=d,l=s)}return V&&"popup"==V.mode&&V==L&&V!=l&&(P(V),Pepsia.Helpers.log("Player #"+V.id,"Désactivation mode Popup !","info",V.debug),u(L),L=!1),I&&"corner"==I.mode&&I==L&&I!=l&&(P(I),Pepsia.Helpers.log("Player #"+I.id,"Désactivation mode Corner !","info",I.debug),u(L),L=!1),l!=L&&(E(L),L=l,Pepsia.Helpers.log("Player #"+L.id,"Activation en Classic Mode !","info",L.debug)),!L.started&&c()&&L.clicsaver&&(h(L),H(o,"Saver !"),v(L,{action:"interstitial_start",value:!0}),Pepsia.Helpers.log("Player #"+L.id,"Data-Saver actif Play2see activé !","info",L.debug)),L.started||!L.autoplay||L.inplay||m(L),g(L),C(L),void O(L)}if(!document.hidden){if(V&&V.api&&("popup"!=V.mode&&(function(e){e.mode="popup",e.box.style.position="fixed",e.box.style.zIndex=92147483647,420<document.body.clientWidth?(e.box.style.width="400px",e.box.style.height="265px"):(e.box.style.width="320px",e.box.style.height="220px");var t=e.popup.split("-"),o=t[0],i=t[1],n="";switch(o){case"top":e.box.style.top=0,e.box.style.bottom="auto";break;case"middle":e.box.style.top="50%",e.box.style.bottom="auto","center"!=i&&(n="translateY(-50%)");break;case"bottom":e.box.style.top="auto",e.box.style.bottom=0}switch(i){case"left":e.box.style.left=0,e.box.style.right="auto",320<document.body.clientWidth?e.close.style.cssText="position: absolute !important;top: 0px !important;right: -22px !important;font-size: 16px !important;line-height: 16px !important;display: block;width: 18px !important;height: 18px !important;text-align: center !important;text-decoration: none !important;color: #333 !important;cursor: pointer !important;margin: 0px !important;padding: 0px !important;background: rgb(255, 255, 255) !important;border: 1px solid rgb(204, 204, 204) !important;border-radius: 20px !important;min-width: auto !important;text-transform:none !important;font-weight: normal !important;":e.close.style.cssText="position: absolute !important;top: -22px !important;right: 0px !important;font-size: 16px !important;line-height: 16px !important;display: block;width: 18px !important;height: 18px !important;text-align: center !important;text-decoration: none !important;color: #333 !important;cursor: pointer !important;margin: 0px !important;padding: 0px !important;background: rgb(255, 255, 255) !important;border: 1px solid rgb(204, 204, 204) !important;border-radius: 20px !important;min-width: auto !important;text-transform:none !important;font-weight: normal !important;";break;case"center":e.box.style.left="50%",e.box.style.right="auto",n="middle"==o?"translate(-50%, -50%)":"translateX(-50%)",320<document.body.clientWidth?e.close.style.cssText="position: absolute !important;top: 0px !important;right: -22px !important;font-size: 16px !important;line-height: 16px !important;display: block;width: 18px !important;height: 18px !important;text-align: center !important;text-decoration: none !important;color: #333 !important;cursor: pointer !important;margin: 0px !important;padding: 0px !important;background: rgb(255, 255, 255) !important;border: 1px solid rgb(204, 204, 204) !important;border-radius: 20px !important;min-width: auto !important;text-transform:none !important;font-weight: normal !important;":e.close.style.cssText="position: absolute !important;top: -22px !important;right: 0px !important;font-size: 16px !important;line-height: 16px !important;display: block;width: 18px !important;height: 18px !important;text-align: center !important;text-decoration: none !important;color: #333 !important;cursor: pointer !important;margin: 0px !important;padding: 0px !important;background: rgb(255, 255, 255) !important;border: 1px solid rgb(204, 204, 204) !important;border-radius: 20px !important;min-width: auto !important;text-transform:none !important;font-weight: normal !important;";break;case"right":e.box.style.left="auto",e.box.style.right=0,320<document.body.clientWidth?e.close.style.cssText="position: absolute !important;top: 0px !important;left: -22px !important;font-size: 16px !important;line-height: 16px !important;display: block;width: 18px !important;height: 18px !important;text-align: center !important;text-decoration: none !important;color: #333 !important;cursor: pointer !important;margin: 0px !important;padding: 0px !important;background: rgb(255, 255, 255) !important;border: 1px solid rgb(204, 204, 204) !important;border-radius: 20px !important;min-width: auto !important;text-transform:none !important;font-weight: normal !important;":e.close.style.cssText="position: absolute !important;top: -22px !important;left: 0px !important;font-size: 16px !important;line-height: 16px !important;display: block;width: 18px !important;height: 18px !important;text-align: center !important;text-decoration: none !important;color: #333 !important;cursor: pointer !important;margin: 0px !important;padding: 0px !important;background: rgb(255, 255, 255) !important;border: 1px solid rgb(204, 204, 204) !important;border-radius: 20px !important;min-width: auto !important;text-transform:none !important;font-weight: normal !important;"}e.box.style.transform=n,e.close.style.display="block",v(e,{action:"mode",value:"popup"}),f(e)}(V),Pepsia.Helpers.log("Player #"+V.id,"Activation mode Popup !","info",V.debug)),L!=V&&(E(L),L=V),L.started||!L.autoplay||L.inplay||m(L)),V&&V==L&&V.api)return g(L),C(L),void O(L);if(!V&&I&&I.isview&&I.api){if("corner"!=I.mode&&!I.inplay&&!I.started&&I.autoplay)return void m(I);"corner"!=I.mode&&(function(e){e.mode="corner",e.box.style.position="fixed",e.box.style.zIndex=92147483647,420<document.body.clientWidth?(e.box.style.width="400px",e.box.style.height="265px"):(e.box.style.width="320px",e.box.style.height="220px");var t=e.corner.split("-"),o=t[0],i=t[1],n="";switch(o){case"top":e.box.style.top=0,e.box.style.bottom="auto";break;case"middle":e.box.style.top="50%",e.box.style.bottom="auto","center"!=i&&(n="translateY(-50%)");break;case"bottom":e.box.style.top="auto",e.box.style.bottom=0}switch(i){case"left":e.box.style.left=0,e.box.style.right="auto",320<document.body.clientWidth?e.close.style.cssText="position: absolute !important;top: 0px !important;right: -22px !important;font-size: 16px !important;line-height: 16px !important;display: block;width: 18px !important;height: 18px !important;text-align: center !important;text-decoration: none !important;color: #333 !important;cursor: pointer !important;margin: 0px !important;padding: 0px !important;background: rgb(255, 255, 255) !important;border: 1px solid rgb(204, 204, 204) !important;border-radius: 20px !important;min-width: auto !important;text-transform:none !important;font-weight: normal !important;":e.close.style.cssText="position: absolute !important;top: -22px !important;right: 0px !important;font-size: 16px !important;line-height: 16px !important;display: block;width: 18px !important;height: 18px !important;text-align: center !important;text-decoration: none !important;color: #333 !important;cursor: pointer !important;margin: 0px !important;padding: 0px !important;background: rgb(255, 255, 255) !important;border: 1px solid rgb(204, 204, 204) !important;border-radius: 20px !important;min-width: auto !important;text-transform:none !important;font-weight: normal !important;";break;case"center":e.box.style.left="50%",e.box.style.right="auto",n="middle"==o?"translate(-50%, -50%)":"translateX(-50%)",320<document.body.clientWidth?e.close.style.cssText="position: absolute !important;top: 0px !important;right: -22px !important;font-size: 16px !important;line-height: 16px !important;display: block;width: 18px !important;height: 18px !important;text-align: center !important;text-decoration: none !important;color: #333 !important;cursor: pointer !important;margin: 0px !important;padding: 0px !important;background: rgb(255, 255, 255) !important;border: 1px solid rgb(204, 204, 204) !important;border-radius: 20px !important;min-width: auto !important;text-transform:none !important;font-weight: normal !important;":e.close.style.cssText="position: absolute !important;top: -22px !important;right: 0px !important;font-size: 16px !important;line-height: 16px !important;display: block;width: 18px !important;height: 18px !important;text-align: center !important;text-decoration: none !important;color: #333 !important;cursor: pointer !important;margin: 0px !important;padding: 0px !important;background: rgb(255, 255, 255) !important;border: 1px solid rgb(204, 204, 204) !important;border-radius: 20px !important;min-width: auto !important;text-transform:none !important;font-weight: normal !important;";break;case"right":e.box.style.left="auto",e.box.style.right=0,320<document.body.clientWidth?e.close.style.cssText="position: absolute !important;top: 0px !important;left: -22px !important;font-size: 16px !important;line-height: 16px !important;display: block;width: 18px !important;height: 18px !important;text-align: center !important;text-decoration: none !important;color: #333 !important;cursor: pointer !important;margin: 0px !important;padding: 0px !important;background: rgb(255, 255, 255) !important;border: 1px solid rgb(204, 204, 204) !important;border-radius: 20px !important;min-width: auto !important;text-transform:none !important;font-weight: normal !important;":e.close.style.cssText="position: absolute !important;top: -22px !important;left: 0px !important;font-size: 16px !important;line-height: 16px !important;display: block;width: 18px !important;height: 18px !important;text-align: center !important;text-decoration: none !important;color: #333 !important;cursor: pointer !important;margin: 0px !important;padding: 0px !important;background: rgb(255, 255, 255) !important;border: 1px solid rgb(204, 204, 204) !important;border-radius: 20px !important;min-width: auto !important;text-transform:none !important;font-weight: normal !important;"}e.box.style.transform=n,e.close.style.display="block",v(e,{action:"mode",value:"corner"}),f(e)}(I),Pepsia.Helpers.log("Player #"+I.id,"Activation mode Corner !","info",I.debug)),L!=I&&(E(L),L=I)}return I&&I==L&&I.api?(g(L),C(L),void O(L)):void 0}L&&(E(L),Pepsia.Helpers.log("Player #"+L.id,"document hidden paused","info",L.debug))}}}}var l,j,L,D,N,s,S,_,W,I,V,z,d,M,F,R,X,B,Y,Q}();
